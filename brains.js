var species = [
    {
        "category": "birds",
        "name":"Oystercatcher",
        "subname":"Torea, Haematopus",
        "folder": "oystercatcher",
        "scale":"scale", 
        "photos":[
            {"name":"a", "title":"Photo by Shaun Lee"},
            {"name":"b", "title":"Photo by Emily Harris"},
            {"name":"c", "title":"Photo by Shaun Lee"},
            {"name":"d", "title":"Photo by Shaun Lee"}
        ],
        "photo":"photo",
        "desc":"5cm in length. Oystercatchers walk on their toes so heel not always visible. Toes more chunky than Spur-winged plover.",
        "similar":[
            {"link":"http://nzbirdsonline.org.nz/species/south-island-pied-oystercatcher","name":"South Island Pied Oystercatcher"},
            {"link":"http://nzbirdsonline.org.nz/species/variable-oystercatcher","name":"Variable Oystercatcher"}
        ]
    },
    {
        "category": "birds",
        "name":"Stilt",
        "subname":"Himantopus",
        "folder": "stilt",
        "scale":"scale", 
        "photos":[
            {"name":"a", "title":"Photo by Shaun Lee"},
            {"name":"b", "title":"Photo by Shaun Lee"},
            {"name":"c", "title":"Photo by Shaun Lee"},
            {"name":"d", "title":"Photo by Shaun Lee"}
        ],
        "photo":"photo",
        "desc":"4cm in length. Slimmer toes than oystercatcher and plover.",
        "similar":[
            {"link":"http://www.nzbirdsonline.org.nz/species/pied-stilt","name":"Pied Stilt"},
            {"link":"http://nzbirdsonline.org.nz/species/black-stilt","name":"Black Stilt"}
        ]
    },
    {
        "category": "birds",
        "name":"Dotterel",
        "subname":"T큰turiwhatu, Charadrius Obscurus",
        "folder": "dotterel",
        "scale":"scale", 
        "photos":[
            {"name":"a", "title":"Photo by Emily Roberts"}
        ],
        "photo":"photo",
        "desc":"3cm in length with asymmetric toes. Dotterels walk on their toes so heel not often visible.",
        "similar":[
            {"link":"http://nzbirdsonline.org.nz/species/new-zealand-dotterel","name":"New Zealand Dotterel"}
        ]
    },
    {
        "category": "birds",
        "name":"Pied Shag",
        "subname":"Kawau, Phalacrocorax varius",
        "folder": "pied-shag",
        "scale":"scale", 
        "photos":[
            {"name":"a", "title":"Photo by Eliane Lagnaz"},
            {"name":"b", "title":"Photo by Eliane Lagnaz"},
            {"name":"c", "title":"Photo by Eliane Lagnaz"}
        ],
        "photo":"photo",
        "desc":"9cm in length. More weight on the outer toe.",
        "similar":[
            {"link":"http://nzbirdsonline.org.nz/species/pied-shag","name":"Pied Shag"}
        ]
    },
    {
        "category": "birds",
        "name":"Pukeko",
        "subname":"Australasian swamphen, Porphyrio melanotus",
        "folder": "pukeko",
        "scale":"scale", 
        "photos":[
            {"name":"a", "title":"Left front foot. Photo by Shaun Lee"}
        ],
        "photo":"photo",
        "desc":"? in length.",
        "similar":[
            {"link":"http://nzbirdsonline.org.nz/species/pukeko","name":"Pukeko"}
        ]
    },
    {
        "category": "mammals",
        "name":"Hedgehog",
        "subname":"Erinaceus europaeus occidentalis",
        "folder": "hedgehog",
        "scale":"scale", 
        "photos":[
            {"name":"a", "title":"Left front foot. Photo by Shaun Lee"},
        ],
        "photo":"photo",
        "desc":"Hedgehog toe pads are larger and closer to the central pad compared with rat or ferret prints. - http://www.landcareresearch.co.nz",
        "similar":[
            {"link":"http://www.pestdetective.org.nz/culprits/hedgehog/","name":"Hedgehog"}
        ]
    },
    {
        "category": "birds",
        "name":"Southern black-backed gull",
        "subname":"Karoro, Kelp gull, Larus dominicanus",
        "folder": "southern-black-backed-gull",
        "scale":"scale", 
        "photos":[
            {"name":"a", "title":"Photo by Shaun Lee"},
            {"name":"b", "title":"Photo by Shaun Lee"},
            {"name":"c", "title":"Photo by Shaun Lee"}
        ],
        "photo":"photo",
        "desc":"7cm in length with webbing on feet noticeable in soft sand.",
        "similar":[
            {"link":"http://www.nzbirdsonline.org.nz/species/southern-black-backed-gull","name":"Southern black-backed gull"}
        ]
    },
    {
        "category": "birds",
        "name":"Gull",
        "subname":"Larus, Red-billed gull or Black-billed gull, Tar훮punga or Tar훮puka",
        "folder": "gull",
        "scale":"scale", 
        "photos":[
            {"name":"a", "title":"Photo by Shaun Lee"},
            {"name":"b", "title":"Photo by Shaun Lee"},
            {"name":"c", "title":"Photo by Shaun Lee"},
            {"name":"d", "title":"Photo by Shaun Lee"}
        ],
        "photo":"photo",
        "desc":"4.5cm in length with webbing visible in soft sand. Smaller prints than black-backed gull.",
        "similar":[
            {"link":"http://www.nzbirdsonline.org.nz/species/red-billed-gull","name":"Red-billed gull"},
            {"link":"http://www.nzbirdsonline.org.nz/species/black-billed-gull","name":"Black-billed gull"}
        ]
    },
    {
        "category": "mammals",
        "name":"Wild European Rabbit",
        "subname":"R훮peti, Oryctolagus cuniculus",
        "folder": "rabbit",
        "scale":"scale", 
        "photos":[
            {"name":"a", "title":"All four feet of a small rabbit landing together. Photo by Shaun Lee"},
        ],
        "photo":"photo",
        "desc":"Back feet much longer than front feet. Length of back feet not always obvious in sand if running.",
        "similar":[
            {"link":"http://www.pestdetective.org.nz/culprits/rabbit/","name":"Rabbit"}
        ]
    },
    {
        "category": "birds",
        "name":"Skylark or Pipit",
        "subname":"Alauda arvensis or Anthus novaeseelandiae",
        "folder": "skylark",
        "scale":"scale", 
        "photos":[
            {"name":"a", "title":"Photo by Shaun Lee"},
            {"name":"b", "title":"Walking. Photo by Shaun Lee"}
        ],
        "photo":"photo",
        "desc":"3cm in length. Back claw drags when walking.",
        "similar":[
            {"link":"http://www.nzbirdsonline.org.nz/species/eurasian-skylark","name":"Eurasian Skylark"},
            {"link":"http://www.nzbirdsonline.org.nz/species/new-zealand-pipit","name":"Pipit"}
        ]
    }
];

$(function() { // Init jQuery

// Build HTML markup for each species in array
species.forEach(function(item){
    var animal = "<div class='animal off'>" +
        "<h1>" + item["name"] + "</h1>" +
        "<h4>" + item["subname"] + "</h4>" +
        "<div class='animal-pics'>" +
        "<div class='column'><img src='img/" + item["category"] + "/" + item["folder"] + "/scale.png'></div>" +
        "<div class='column'>" +
        "<div class='gallery'>";
    var count_photos = 0;
    item["photos"].forEach(function(photo){
        animal = animal + "<div><a href='img/" + item["category"] + "/" + item["folder"] + "/" + photo["name"] + ".jpg' title='" + photo["title"]  + "'><img src='img/" + item["category"] + "/" + item["folder"] + "/-" + photo["name"] + ".jpg' ></a></div>";
        count_photos = count_photos + 1;
    });
    for (var i = 4; i > count_photos; i--) {
        animal = animal + "<div><img src='img/blank.png'></div>";
    }
    animal = animal + 
        "</div>" +
        "</div>" +
        "<div class='column photo'>" +
        "<img class='thephoto' src='img/" + item["category"] + "/" + item["folder"] + "/" + item["photo"] + ".jpg'>" +
        "<img class='show' src='img/icon-hide.svg'>" + 
        "</div>" +
        "</div>" +
        "<p class='desc'>" + item["desc"] + "</p>" +
        "<p class='species'><span class='likely'>LIKELY SPECIES:</span>";
    item["similar"].forEach(function(similar){
        animal = animal + 
            " <a target='_blank' href='" + similar["link"] + "'>" + 
            similar["name"] + "</a>";
    });
    animal = animal + "</p>";
    animal = animal + "</div>";
    $('section.animals').append(animal);
});

// Turn species on and off (show/hide)
function turnOn(el, or, isOn) {
    if ( isOn === true) {
        // ON
        $( el ).addClass('on');
        $( el ).removeClass('off');
        $( or ).attr('src', 'img/icon-hide.svg');
        $( or ).prev().animate( {opacity: 1} );
        $( el ).removeClass('animalOn');
        $( el ).addClass('animalOff');
        $( el ).find('h1, h4, p.desc, p.species').slideDown('fast');
    }
    else {
        // OFF
        $( el ).addClass('off');
        $( el ).removeClass('on');
        $( or ).attr('src', 'img/icon-show.svg');
        $( or ).prev().animate( {opacity: .1} );
        $( el ).removeClass('animalOff');
        $( el ).addClass('animalOn');
        $( el ).find('h1, h4, p.desc, p.species').slideUp('fast');
    }
};

// Show hide method for div species
function showAndHide (or, showAll) {
    var el = $( or ).parent().parent().parent();
    if (typeof showAll === "undefined" || showAll === null) { 
        if ( $(el).hasClass( 'off' ) ) {
            turnOn(el, or, true);
        } else {
            turnOn(el, or, false);
        }
    }
    else {
        if (showAll === true) {
            turnOn(el, or, true);
        }
        else {
            turnOn(el, or, false);
        }
    }
    
};
    
// Show hide animals upon click
$('.show').bind('click', function() {
    showAndHide (this);
});

// Show hide rollover
$('.show').hover(function() {
    var el = $( this ).parent().parent().parent();
    if ($ ( el ).hasClass('on') ) {
        $( this ).attr('src', 'img/icon-hide.svg');
    }
    else{
        $( this ).attr('src', 'img/icon-show.svg');
    }
   
    }, function () {
        var el = $( this ).parent().parent().parent();
        if ($ ( el ).hasClass('off') ) {
            $( this ).attr('src', 'img/icon-hide.svg');
        }
        else{
            $( this ).attr('src', 'img/icon-show.svg');
        }
});
    
// Build Galleries
$('.gallery').each(function() {
    // From https://github.com/dbrekalo/simpleLightbox
    $( this ).find('a').simpleLightbox();
});

// Show all button
$('nav a:last-child').click(function() {
    var showAll = false;
    if ($ (this).hasClass( 'collapsed' )) {
        $ (this).children('span').text('Hide all');
        showAll = true;
        $ (this).removeClass( 'collapsed' )
    }
    else {
        $ (this).children('span').text('Show all');
        $ (this).addClass( 'collapsed' )
    }
    $( '.show' ).each(function() {
        showAndHide(this, showAll);
    });
});

$('nav a:last-child').hover(function() {
        $( this ).children('img').attr('src', 'img/_hide.png');
    }, function () {
        $( this ).children('img').attr('src', 'img/_show.png');        
});
    
}); // End jQuery